{"id":"pubsub","type":"class","name":"PubSub","overview":"<p>\n  This class allows you interact with Cloud Pub/Sub.\n</p>\n\n\n\n<p>\n  First, install <code>@google-cloud/pubsub</code> with npm:\n</p>\n\n<div hljs language=\"bash\">$ npm install --save @google-cloud/pubsub</div>\n\n<p>\n  If you are running your app on Google Compute Engine, you won't need to worry about supplying connection configuration options to <code>@google-cloud/pubsub</code>â€” we figure that out for you.\n</p>\n\n<p>\n  However, if you're running your app elsewhere, you will need to provide project details to authenticate API requests.\n</p>\n\n<h4>Google Cloud Platform</h4>\n<div hljs language=\"javascript\">\nvar pubsub = require('@google-cloud/pubsub')();\n</div>\n\n<h4>Elsewhere</h4>\n<div hljs language=\"javascript\">\nvar pubsub = require('@google-cloud/pubsub')({\n  projectId: 'grape-spaceship-123',\n  keyFilename: '/path/to/keyfile.json'\n});\n</div>\n\n<p>\n  The full set of options which can be passed to <code>@google-cloud/pubsub</code> are outlined in our <a href=\"#/docs/pubsub/v0.13.2/guides/authentication\">Authentication guide</a>.\n</p>\n","description":"","source":"packages\\pubsub\\src\\index.js","parent":null,"children":["pubsub/connection-pool","pubsub/histogram","pubsub/iam","pubsub/publisher","pubsub/snapshot","pubsub/subscription","pubsub/topic","pubsub/v1"],"methods":[{"id":"PubSub","name":"PubSub","type":"constructor","description":"<p><a href=\"https://developers.google.com/pubsub/overview\">Cloud Pub/Sub</a> is a reliable, many-to-many, asynchronous messaging service from Cloud Platform.</p><p>The <code>apiEndpoint</code> from options will set the host. If not set, the <code>PUBSUB_EMULATOR_HOST</code> environment variable from the gcloud SDK is honored, otherwise the actual API endpoint will be used.</p>","source":"packages\\pubsub\\src\\index.js#L64","resources":[{"title":"Cloud Pub/Sub overview","link":"https://developers.google.com/pubsub/overview"}],"examples":[],"params":[{"name":"options","description":"<ul> <li><a href=\"#/docs\">Configuration object</a>.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"createSubscription","name":"createSubscription","type":"instance","description":"<p>Create a subscription to a topic.</p>","source":"packages\\pubsub\\src\\index.js#L145","resources":[{"title":"Subscriptions: create API Documentation","link":"https://cloud.google.com/pubsub/docs/reference/rest/v1/projects.subscriptions/create"}],"examples":[{"caption":"<p>Subscribe to a topic. (Also see <a data-custom-type=\"pubsub/topic\" data-method=\"createSubscription\">pubsub/topic#createSubscription</a>).</p>","code":"var topic = 'messageCenter';\nvar name = 'newMessages';\n\nvar callback = function(err, subscription, apiResponse) {};\n\npubsub.createSubscription(topic, name, callback);"},{"caption":"<p>Customize the subscription.</p>","code":"pubsub.createSubscription(topic, name, {\n  ackDeadline: 90000 // 90 seconds\n}, callback);"},{"caption":"<p>If the callback is omitted, we'll return a Promise.</p>","code":"pubsub.createSubscription(topic, name).then(function(data) {\n  var subscription = data[0];\n  var apiResponse = data[1];\n});"}],"params":[{"name":"topic","description":"<ul> <li>The Topic to create a subscription to.</li> </ul> ","types":["<a data-custom-type=\"pubsub/topic\" data-method=\"\">pubsub/topic</a>","string"],"optional":false,"nullable":false},{"name":"name","description":"<ul> <li>The name of the subscription.</li> </ul> ","types":["string"],"optional":true,"nullable":false},{"name":"options","description":"<ul> <li>See a <a href=\"https://cloud.google.com/pubsub/docs/reference/rest/v1/projects.subscriptions\">Subscription resource</a></li> </ul> ","types":["object"],"optional":true,"nullable":false},{"name":"options.flowControl","description":"<ul> <li>Flow control configurations for receiving messages. Note that these options do not persist across  subscription instances.</li> </ul> ","types":["object"],"optional":false,"nullable":false},{"name":"options.flowControl.maxBytes","description":"<ul> <li>The maximum number of bytes in un-acked messages to allow before the subscription pauses incoming  messages. Defaults to 20% of free memory.</li> </ul> ","types":["number"],"optional":false,"nullable":false},{"name":"options.flowControl.maxMessages","description":"<ul> <li>The maximum number of un-acked messages to allow before the subscription pauses incoming  messages. Default: Infinity.</li> </ul> ","types":["number"],"optional":false,"nullable":false},{"name":"options.gaxOpts","description":"<ul> <li>Request configuration options, outlined here: <a href=\"https://googleapis.github.io/gax-nodejs/CallSettings.html\">https://googleapis.github.io/gax-nodejs/CallSettings.html</a>.</li> </ul> ","types":["object"],"optional":false,"nullable":false},{"name":"options.messageRetentionDuration","description":"<ul> <li>Set this to override the default duration of 7 days. This value is expected in seconds.  Acceptable values are in the range of 10 minutes and 7 days.</li> </ul> ","types":["number","date"],"optional":false,"nullable":false},{"name":"options.pushEndpoint","description":"<ul> <li>A URL to a custom endpoint that messages should be pushed to.</li> </ul> ","types":["string"],"optional":false,"nullable":false},{"name":"options.retainAckedMessages","description":"<ul> <li>If set, acked messages are retained in the subscription&#39;s backlog for the length of time specified  by <code>options.messageRetentionDuration</code>. Default: <code>false</code></li> </ul> ","types":["boolean"],"optional":false,"nullable":false},{"name":"callback","description":"<ul> <li>The callback function.</li> </ul> ","types":["function"],"optional":false,"nullable":false},{"name":"callback.err","description":"<ul> <li>An error returned while making this request</li> </ul> ","types":["error"],"optional":false,"nullable":true},{"name":"callback.subscription","description":"<ul> <li>The subscription.</li> </ul> ","types":["<a data-custom-type=\"pubsub/subscription\" data-method=\"\">pubsub/subscription</a>"],"optional":false,"nullable":false},{"name":"callback.apiResponse","description":"<ul> <li>The full API response.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[{"type":"Error","description":"<p>If a Topic instance or topic name is not provided.</p>"},{"type":"Error","description":"<p>If a subscription name is not provided.</p>"}],"returns":[]},{"id":"createTopic","name":"createTopic","type":"instance","description":"<p>Create a topic with the given name.</p>","source":"packages\\pubsub\\src\\index.js#L237","resources":[{"title":"Topics: create API Documentation","link":"https://cloud.google.com/pubsub/docs/reference/rest/v1/projects.topics/create"}],"examples":[{"code":"pubsub.createTopic('my-new-topic', function(err, topic, apiResponse) {\n  if (!err) {\n    // The topic was created successfully.\n  }\n});"},{"caption":"<p>If the callback is omitted, we'll return a Promise.</p>","code":"pubsub.createTopic('my-new-topic').then(function(data) {\n  var topic = data[0];\n  var apiResponse = data[1];\n});"}],"params":[{"name":"name","description":"<ul> <li>Name of the topic.</li> </ul> ","types":["string"],"optional":false,"nullable":false},{"name":"gaxOpts","description":"<ul> <li>Request configuration options, outlined here: <a href=\"https://googleapis.github.io/gax-nodejs/CallSettings.html\">https://googleapis.github.io/gax-nodejs/CallSettings.html</a>.</li> </ul> ","types":["object"],"optional":true,"nullable":false},{"name":"callback","description":"<ul> <li>The callback function.</li> </ul> ","types":["function"],"optional":true,"nullable":false},{"name":"callback.err","description":"<ul> <li>An error from the API call, may be null.</li> </ul> ","types":["error"],"optional":false,"nullable":true},{"name":"callback.topic","description":"<ul> <li>The newly created topic.</li> </ul> ","types":["<a data-custom-type=\"pubsub/topic\" data-method=\"\">pubsub/topic</a>"],"optional":false,"nullable":false},{"name":"callback.apiResponse","description":"<ul> <li>The full API response from the service.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"getSnapshots","name":"getSnapshots","type":"instance","description":"<p>Get a list of snapshots.</p>","source":"packages\\pubsub\\src\\index.js#L322","resources":[],"examples":[{"code":"pubsub.getSnapshots(function(err, snapshots) {\n  if (!err) {\n    // snapshots is an array of Snapshot objects.\n  }\n});"},{"caption":"<p>If the callback is omitted, we'll return a Promise.</p>","code":"pubsub.getSnapshots().then(function(data) {\n  var snapshots = data[0];\n});"}],"params":[{"name":"options","description":"<ul> <li>Configuration object.</li> </ul> ","types":["object"],"optional":true,"nullable":false},{"name":"options.autoPaginate","description":"<ul> <li>Have pagination handled automatically. Default: true.</li> </ul> ","types":["boolean"],"optional":false,"nullable":false},{"name":"options.gaxOpts","description":"<ul> <li>Request configuration options, outlined here: <a href=\"https://googleapis.github.io/gax-nodejs/CallSettings.html\">https://googleapis.github.io/gax-nodejs/CallSettings.html</a>.</li> </ul> ","types":["object"],"optional":false,"nullable":false},{"name":"options.pageSize","description":"<ul> <li>Maximum number of results to return.</li> </ul> ","types":["number"],"optional":false,"nullable":false},{"name":"options.pageToken","description":"<ul> <li>Page token.</li> </ul> ","types":["string"],"optional":false,"nullable":false},{"name":"callback","description":"<ul> <li>The callback function.</li> </ul> ","types":["function"],"optional":false,"nullable":false},{"name":"callback.err","description":"<ul> <li>An error from the API call, may be null.</li> </ul> ","types":["error"],"optional":false,"nullable":true},{"name":"callback.snapshots","description":"<ul> <li>The list of snapshots in your project.</li> </ul> ","types":["<a data-custom-type=\"pubsub/snapshot[]\" data-method=\"\">pubsub/snapshot[]</a>"],"optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"getSnapshotsStream","name":"getSnapshotsStream","type":"instance","description":"<p>Get a list of the <a data-custom-type=\"pubsub/snapshot\" data-method=\"\">pubsub/snapshot</a> objects as a readable object stream.</p>","source":"packages\\pubsub\\src\\index.js#L388","resources":[],"examples":[{"code":"pubsub.getSnapshotsStream()\n  .on('error', console.error)\n  .on('data', function(snapshot) {\n    // snapshot is a Snapshot object.\n  })\n  .on('end', function() {\n    // All snapshots retrieved.\n  });"},{"caption":"<p>If you anticipate many results, you can end a stream early to prevent \nunnecessary processing and API requests.</p>","code":"pubsub.getSnapshotsStream()\n  .on('data', function(snapshot) {\n    this.end();\n  });"}],"params":[{"name":"options","description":"<ul> <li>Configuration object. See <a data-custom-type=\"pubsub\" data-method=\"getSnapshots\">pubsub#getSnapshots</a> for a complete list of options.</li> </ul> ","types":["object"],"optional":true,"nullable":false}],"exceptions":[],"returns":[{"types":["stream"],"description":""}]},{"id":"getSubscriptions","name":"getSubscriptions","type":"instance","description":"<p>Get a list of the subscriptions registered to all of your project&#39;s topics. You may optionally provide a query object as the first argument to customize the response.</p><p>Your provided callback will be invoked with an error object if an API error occurred or an array of <a data-custom-type=\"pubsub/subscription\" data-method=\"\">pubsub/subscription</a> objects.</p><p>To get subscriptions for a topic, see <a data-custom-type=\"pubsub/topic\" data-method=\"\">pubsub/topic</a>.</p>","source":"packages\\pubsub\\src\\index.js#L433","resources":[{"title":"Subscriptions: list API Documentation","link":"https://cloud.google.com/pubsub/docs/reference/rest/v1/projects.subscriptions/list"}],"examples":[{"code":"pubsub.getSubscriptions(function(err, subscriptions) {\n  if (!err) {\n    // subscriptions is an array of Subscription objects.\n  }\n});"},{"caption":"<p>If the callback is omitted, we'll return a Promise.</p>","code":"pubsub.getSubscriptions().then(function(data) {\n  var subscriptions = data[0];\n});"}],"params":[{"name":"options","description":"<ul> <li>Configuration object.</li> </ul> ","types":["object"],"optional":true,"nullable":false},{"name":"options.autoPaginate","description":"<ul> <li>Have pagination handled automatically. Default: true.</li> </ul> ","types":["boolean"],"optional":false,"nullable":false},{"name":"options.gaxOpts","description":"<ul> <li>Request configuration options, outlined here: <a href=\"https://googleapis.github.io/gax-nodejs/CallSettings.html\">https://googleapis.github.io/gax-nodejs/CallSettings.html</a>.</li> </ul> ","types":["object"],"optional":false,"nullable":false},{"name":"options.pageSize","description":"<ul> <li>Maximum number of results to return.</li> </ul> ","types":["number"],"optional":false,"nullable":false},{"name":"options.pageToken","description":"<ul> <li>Page token.</li> </ul> ","types":["string"],"optional":false,"nullable":false},{"name":"options.topic","description":"<ul> <li>The name of the topic to list subscriptions from.</li> </ul> ","types":["string","<a data-custom-type=\"pubsub/topic\" data-method=\"\">pubsub/topic</a>"],"optional":false,"nullable":false},{"name":"callback","description":"<ul> <li>The callback function.</li> </ul> ","types":["function"],"optional":false,"nullable":false},{"name":"callback.err","description":"<ul> <li>An error from the API call, may be null.</li> </ul> ","types":["error"],"optional":false,"nullable":true},{"name":"callback.subscriptions","description":"<ul> <li>The list of subscriptions in your project.</li> </ul> ","types":["<a data-custom-type=\"pubsub/subscription[]\" data-method=\"\">pubsub/subscription[]</a>"],"optional":false,"nullable":false},{"name":"callback.apiResponse","description":"<ul> <li>The full API response from the service.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"getSubscriptionsStream","name":"getSubscriptionsStream","type":"instance","description":"<p>Get a list of the <a data-custom-type=\"pubsub/subscription\" data-method=\"\">pubsub/subscription</a> objects registered to all of your project&#39;s topics as a readable object stream.</p>","source":"packages\\pubsub\\src\\index.js#L509","resources":[],"examples":[{"code":"pubsub.getSubscriptionsStream()\n  .on('error', console.error)\n  .on('data', function(subscription) {\n    // subscription is a Subscription object.\n  })\n  .on('end', function() {\n    // All subscriptions retrieved.\n  });"},{"caption":"<p>If you anticipate many results, you can end a stream early to prevent \nunnecessary processing and API requests.</p>","code":"pubsub.getSubscriptionsStream()\n  .on('data', function(subscription) {\n    this.end();\n  });"}],"params":[{"name":"options","description":"<ul> <li>Configuration object. See <a data-custom-type=\"pubsub\" data-method=\"getSubscriptions\">pubsub#getSubscriptions</a> for a complete list of options.</li> </ul> ","types":["object"],"optional":true,"nullable":false}],"exceptions":[],"returns":[{"types":["stream"],"description":""}]},{"id":"getTopics","name":"getTopics","type":"instance","description":"<p>Get a list of the topics registered to your project. You may optionally provide a query object as the first argument to customize the response.</p>","source":"packages\\pubsub\\src\\index.js#L552","resources":[{"title":"Topics: list API Documentation","link":"https://cloud.google.com/pubsub/docs/reference/rest/v1/projects.topics/list"}],"examples":[{"code":"pubsub.getTopics(function(err, topics) {\n  if (!err) {\n    // topics is an array of Topic objects.\n  }\n});"},{"caption":"<p>Customize the query.</p>","code":"pubsub.getTopics({\n  pageSize: 3\n}, function(err, topics) {});"},{"caption":"<p>If the callback is omitted, we'll return a Promise.</p>","code":"pubsub.getTopics().then(function(data) {\n  var topics = data[0];\n});"}],"params":[{"name":"query","description":"<ul> <li>Query object.</li> </ul> ","types":["object"],"optional":true,"nullable":false},{"name":"query.autoPaginate","description":"<ul> <li>Have pagination handled automatically. Default: true.</li> </ul> ","types":["boolean"],"optional":false,"nullable":false},{"name":"query.gaxOpts","description":"<ul> <li>Request configuration options, outlined here: <a href=\"https://googleapis.github.io/gax-nodejs/CallSettings.html\">https://googleapis.github.io/gax-nodejs/CallSettings.html</a>.</li> </ul> ","types":["object"],"optional":false,"nullable":false},{"name":"query.pageSize","description":"<ul> <li>Max number of results to return.</li> </ul> ","types":["number"],"optional":false,"nullable":false},{"name":"query.pageToken","description":"<ul> <li>Page token.</li> </ul> ","types":["string"],"optional":false,"nullable":false},{"name":"callback","description":"<ul> <li>The callback function.</li> </ul> ","types":["function"],"optional":false,"nullable":false},{"name":"callback.err","description":"<ul> <li>An error from the API call, may be null.</li> </ul> ","types":["error"],"optional":false,"nullable":true},{"name":"callback.topics","description":"<ul> <li>The list of topics returned.</li> </ul> ","types":["<a data-custom-type=\"pubsub/topic[]\" data-method=\"\">pubsub/topic[]</a>"],"optional":false,"nullable":false},{"name":"callback.apiResponse","description":"<ul> <li>The full API response from the service.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"getTopicsStream","name":"getTopicsStream","type":"instance","description":"<p>Get a list of the <a data-custom-type=\"pubsub/topic\" data-method=\"\">pubsub/topic</a> objects registered to your project as a readable object stream.</p>","source":"packages\\pubsub\\src\\index.js#L618","resources":[],"examples":[{"code":"pubsub.getTopicsStream()\n  .on('error', console.error)\n  .on('data', function(topic) {\n    // topic is a Topic object.\n  })\n  .on('end', function() {\n    // All topics retrieved.\n  });"},{"caption":"<p>If you anticipate many results, you can end a stream early to prevent \nunnecessary processing and API requests.</p>","code":"pubsub.getTopicsStream()\n  .on('data', function(topic) {\n    this.end();\n  });"}],"params":[{"name":"query","description":"<ul> <li>Configuration object. See <a data-custom-type=\"pubsub\" data-method=\"getTopics\">pubsub#getTopics</a> for a complete list of options.</li> </ul> ","types":["object"],"optional":true,"nullable":false}],"exceptions":[],"returns":[{"types":["stream"],"description":""}]},{"id":"snapshot","name":"snapshot","type":"instance","description":"<p>Create a Snapshot object. See <a data-custom-type=\"pubsub/subscription\" data-method=\"createSnapshot\">pubsub/subscription#createSnapshot</a> to create a snapshot.</p>","source":"packages\\pubsub\\src\\index.js#L671","resources":[],"examples":[{"code":"var snapshot = pubsub.snapshot('my-snapshot');"}],"params":[{"name":"name","description":"<ul> <li>The name of the snapshot.</li> </ul> ","types":["string"],"optional":false,"nullable":false}],"exceptions":[{"type":"Error","description":"<p>If a name is not provided.</p>"}],"returns":[{"types":["<a data-custom-type=\"pubsub/snapshot\" data-method=\"\">pubsub/snapshot</a>"],"description":""}]},{"id":"subscription","name":"subscription","type":"instance","description":"<p>Create a Subscription object. This command by itself will not run any API requests. You will receive a <a data-custom-type=\"pubsub/subscription\" data-method=\"\">pubsub/subscription</a> object, which will allow you to interact with a subscription.</p>","source":"packages\\pubsub\\src\\index.js#L703","resources":[],"examples":[{"code":"var subscription = pubsub.subscription('my-subscription');\n\n// Register a listener for `message` events.\nsubscription.on('message', function(message) {\n  // Called every time a message is received.\n  // message.id = ID of the message.\n  // message.ackId = ID used to acknowledge the message receival.\n  // message.data = Contents of the message.\n  // message.attributes = Attributes of the message.\n  // message.publishTime = Timestamp when Pub/Sub received the message.\n});"}],"params":[{"name":"name","description":"<ul> <li>Name of the subscription.</li> </ul> ","types":["string"],"optional":false,"nullable":false},{"name":"options","description":"<ul> <li>Configuration object.</li> </ul> ","types":["object"],"optional":true,"nullable":false}],"exceptions":[{"type":"Error","description":"<p>If subscription name is omitted.</p>"}],"returns":[{"types":["<a data-custom-type=\"pubsub/subscription\" data-method=\"\">pubsub/subscription</a>"],"description":""}]},{"id":"topic","name":"topic","type":"instance","description":"<p>Create a Topic object. See <a data-custom-type=\"pubsub\" data-method=\"createTopic\">pubsub#createTopic</a> to create a topic.</p>","source":"packages\\pubsub\\src\\index.js#L722","resources":[],"examples":[{"code":"var topic = pubsub.topic('my-topic');"}],"params":[{"name":"name","description":"<ul> <li>The name of the topic.</li> </ul> ","types":["string"],"optional":false,"nullable":false}],"exceptions":[{"type":"Error","description":"<p>If a name is not provided.</p>"}],"returns":[{"types":["<a data-custom-type=\"pubsub/topic\" data-method=\"\">pubsub/topic</a>"],"description":""}]}],"path":"index.json"}